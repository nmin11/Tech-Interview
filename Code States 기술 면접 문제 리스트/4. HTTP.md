# HTTP

### Q1. 브라우저에서 URL을 입력하고 요청한 페이지를 볼 때까지 어떤 일이 일어나는지 설명해주세요.

<br>

**A.**

브라우저의 주소창에 입력한 URL은 서버가 제공되는 환경에 존재하는 파일의 위치를 나타냅니다.  
예를 들어, https://google.com 이라는 주소를 입력하게 되면 google.com 주소가 가리키는 서버의 기본 폴더를 찾아가게 됩니다.  
기본 주소로 접속한 이후에는, CLI 환경에서 폴더와 파일의 위치를 찾아 이동하듯이 슬래시를 이용해서 서버의 폴더에 진입하거나 파일을 요청할 수 있게 되는 것입니다.

<br>

### Q2. HTTP와 HTTPS의 차이점은 무엇인지 설명해주세요.

<br>

**A.**

우선 HTTP는 사용자가 요청을 보내고, 서버가 이에 대한 응답을 보내서 커뮤니케이션을 이루어지게 하는 프로토콜입니다.  
그리고 HTTPS는 HTTP에 secure를 뜻하는 'S'를 붙여서 보다 안전하다는 의미를 내포하고 있습니다.  
크게 두 가지의 안정성을 확보할 수 있는데요.  
먼저, 사용자가 웹사이트에 보내는 정보를 다른 누군가가 훔쳐보지 못하게 합니다.  
그리고 또한, 사용자가 접속한 현 사이트가 신뢰할 수 있는 사이트인지를 판별할 수 있도록 해줍니다.

<br>

HTTPS에서 사용자의 요청을 제 3자가 보지 못하게 하도록 하기 위해서, '비대칭키'를 사용하게 되는데요.  
이는 '공개키'라고 불리기도 합니다.  
사실 1970년대 이전에는 '대칭키'라는 것을 사용했는데, 이 '대칭키'는 특정 키로 암호화하고 다시 동일한 키로 복호화하는 방식을 뜻합니다.  
이와는 상반되게, '비대칭키'는 A라는 키로 암호화했을 경우, B라는 키로만 복호화를 할 수 있게 합니다.  
반대로 B키로 암호화하면 A키로 복호화할 수 있습니다.

<br>

그리고 또한, HTTPS는 사용자가 접속한 사이트가 신뢰할 수 있는 사이트인지를 판별할 수 있게 하기 위해서, 이걸 인증해주는 공인된 민간 기업들인 Certificate Authority, 줄여서 CA를 활용합니다.  
크롬, 사파리, 파이어폭스, 엣지 등의 브라우저에는 이 CA 목록이 내장되어 있으며, 이러한 CA의 공개키를 활용해서 해당 사이트가 신뢰할 수 있는 사이트인지 판별해냅니다.

<br>

### Q3. CORS란 무엇이고 목적은 어떻게 되는지 설명해주세요. 그리고 Spring에서 CORS를 설정하는 모든 방법을 소개해주세요.

<br>

**A.**

CORS는 한 사이트에서 주소가 다른 서버로 요청을 보낼 때 자주 접하게 되는 메시지입니다.  
Cross-Origin-Resource-Sharing은 말 그대로 다른 출처 간에 리소스를 공유할 수 있도록 하는 것을 말합니다.  
CORS는 정확히는 에러가 아닙니다.  
원래 서로 다른 출처끼리 리소스를 공유하는 것은 안 되게 하는 것이 기본값인데, 이러한 리소스를 허용해주는 작업을 바로 CORS라고 부릅니다.

<br>

이 CORS가 처음에는 기본값으로 막혀 있는 이유는 쿠키나 세션에 담겨 있는 유저들의 정보가 외부 출처로 전달되는 것을 막기 위한 목적을 가지고 있습니다.

<br>

그리고 Spring에서 CORS를 설정하기 위해서는 크게 2가지 방법이 있습니다.  
하나는 컨트롤러에서 CrossOrign이라는 어노테이션을 달아주고, 여기에 origins 값으로 CORS를 허용할 origin들을 적어줍니다.  
이후에 추가적으로 CORS 관련 설정들도 이 어노테이션으로 설정해줄 수 있었습니다.  
이 첫번째 방법은 저희가 퍼스트 프로젝트를 진행했을 때 적용했던 방법입니다.  
그러나 파이널 프로젝트에서는 더 나은 방법이 있다는 것을 깨닫게 되어서 이를 적용했습니다.  
바로 WebConfig라는 configuration 클래스를 만들어서 한번에 설정해주는 방법이었습니다.  
configuration 어노테이션을 달아준 클래스에, WebMvcConfigure라는 인터페이스를 implements 해주고, addCorsMapping이라는 메소드를 오버라이드하여, 여기에서 CORS에 대한 전반적인 처리를 한번에 해주는 방식이었습니다.  
여기에서 허용할 origin들 설정이나, allow credential 옵션, 허용할 헤더나 허용할 HTTP 메소드들을 지정해줄 수 있었습니다.  
이렇게 config 클래스를 활용해서 한번에 CORS 관련 설정을 정리해주니 코드가 훨씬 간결해진 것을 느낄 수 있었습니다.
